(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"9gBE":function(e,t,n){"use strict";n.r(t),n.d(t,"_frontmatter",(function(){return i})),n.d(t,"default",(function(){return c}));n("5hJT"),n("W1QL"),n("K/PF"),n("t91x"),n("75LO"),n("PJhk");var a=n("SAVP"),r=n("TjRS");n("aD51");function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var i={};void 0!==i&&i&&i===Object(i)&&Object.isExtensible(i)&&!i.hasOwnProperty("__filemeta")&&Object.defineProperty(i,"__filemeta",{configurable:!0,value:{name:"_frontmatter",filename:"docs/best_practices/es.mdx"}});var l={_frontmatter:i},s=r.a;function c(e){var t=e.components,n=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,["components"]);return Object(a.b)(s,o({},l,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("h1",{id:"ecmascriptjs-conventions"},"ECMAScript/JS conventions"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},"ES7 (with babel and polyfills), not Flow or TypeScript")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},"eslint with airbnb style guide")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},"yarn and webpack, not bower or grunt"),Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},"Additional webpack modules need to go through architecture review"))),Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},"piwik for analytics and Sentry for error tracking")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},"travis for CI")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},"Use browserstack/saucelabs or similar to test mainstream browsers and devices")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},"Create a visual style guide with the UI components"),Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},"Test the components visually with gemini"),Object(a.b)("li",{parentName:"ul"},"A single page with all the components for human consumption,\nseparate pages with component per page for CI"))),Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},"process.env can be read only from one file,\nseparate ENVs that are read only build time and those that are read runtime")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},'Avoid using target="',"_",'blank", and if you do, use noreferrer and noopener')),Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},"Do not include node","_","modules in source.\nIf you need to build something custom, built it properly so that any (sub)dependencies\ndo not get locked.\nIf you need to patch upstream versions, make PRs upstream and document the related PR to\nthe repo so that the hacked version can be changed back to the official one later.")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},Object(a.b)("a",o({parentName:"p"},{href:"https://mathiasbynens.be/notes/async-stack-traces"}),"Use await/async instead of Promises"),"."),Object(a.b)("p",{parentName:"li"},"Not"),Object(a.b)("pre",{parentName:"li"},Object(a.b)("code",o({parentName:"pre"},{className:"language-javascript"}),"const fetchAndDisplay = ({ url, element }) => {\n  showLoadingSpinner();\n  fetch(url)\n    .then((response) => response.text())\n    .then((text) => {\n      element.textContent = text;\n    })\n    .catch((error) => {\n      element.textContent = error.message;\n    })\n    .finally(() => {\n      hideLoadingSpinner();\n    });\n};\n")),Object(a.b)("p",{parentName:"li"},"but"),Object(a.b)("pre",{parentName:"li"},Object(a.b)("code",o({parentName:"pre"},{className:"language-javascript"}),"const fetchAndDisplay = async ({ url, element }) => {\n  showLoadingSpinner();\n  try {\n    const response = await fetch(url);\n    const text = await response.text();\n    element.textContent = text;\n  } catch (error) {\n    element.textContent = error.message;\n  } finally {\n    hideLoadingSpinner();\n  }\n};\n")),Object(a.b)("p",{parentName:"li"},"Use ",Object(a.b)("inlineCode",{parentName:"p"},"finally")," to avoid code duplication and to semantically\nseparate cleanup from the other parts."),Object(a.b)("p",{parentName:"li"},"If you need to run the Promises in parallel,\ncreate the promises first and then await for them in a loop,\nor use Promise.all() (or .race())."),Object(a.b)("p",{parentName:"li"},"If for some reason you really do need to use the Promise API directly,\nbeware ",Object(a.b)("a",o({parentName:"p"},{href:"https://pouchdb.com/2015/05/18/we-have-a-problem-with-promises.html"}),"the various gotchas"),"\nlike promise results falling through ",Object(a.b)("inlineCode",{parentName:"p"},".then"),"s when the ",Object(a.b)("inlineCode",{parentName:"p"},".then")," doesn't get a function,\nor how the error handler in ",Object(a.b)("inlineCode",{parentName:"p"},".then")," doesn't catch errors coming from the result handler in the same ",Object(a.b)("inlineCode",{parentName:"p"},".then"),".\nAnd especially always catch the errors, as otherwise they will go to a black hole and you'll never hear from them (at least write a ",Object(a.b)("inlineCode",{parentName:"p"},".catch(console.log.bind(console))"),")."))),Object(a.b)("h4",{id:"react"},"React"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"react-intl for translations"),Object(a.b)("li",{parentName:"ul"},"redux as the store"),Object(a.b)("li",{parentName:"ul"},"redux-actions"),Object(a.b)("li",{parentName:"ul"},"redux-promise, saga or thunk (needs comments)"),Object(a.b)("li",{parentName:"ul"},"Separate API HTTP calls to a separate module/file"),Object(a.b)("li",{parentName:"ul"},"Put component specific styling next to component ES code using webpack css-loader"),Object(a.b)("li",{parentName:"ul"},"export defaults with same name as the file\n(or the containing folder if using index.js inside a component folder)"),Object(a.b)("li",{parentName:"ul"},"Write tests with jest, chai and enzyme")),Object(a.b)("h3",{id:"open-issues--ideas"},"Open issues / ideas"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"Chrome Lighthouse (analyses, but are weak points worth pursuing?)")))}c&&c===Object(c)&&Object.isExtensible(c)&&!c.hasOwnProperty("__filemeta")&&Object.defineProperty(c,"__filemeta",{configurable:!0,value:{name:"MDXContent",filename:"docs/best_practices/es.mdx"}}),c.isMDXComponent=!0}}]);
//# sourceMappingURL=component---docs-best-practices-es-mdx-21cd5e971de3f93e5b9d.js.map